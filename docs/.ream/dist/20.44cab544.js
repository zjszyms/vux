webpackJsonp([20],{184:function(s,t,a){s.exports=a(497)},333:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={head:{}}},497:function(s,t,a){var e=a(4)(a(333),a(577),null,null,null);e.options.__file="/Users/lizheng/workspace/vux-design/vux-doc/docs/node_modules/v-markdown-loader/_cache/vux-loader-9.vue",e.esModule&&Object.keys(e.esModule).some(function(s){return"default"!==s&&"__"!==s.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),e.options.functional&&console.error("[vue-loader] vux-loader-9.vue: functional components are not supported with templates, they should use render functions."),s.exports=e.exports},577:function(s,t,a){s.exports={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("h2",{staticClass:"big-title"},[s._v("vux!vue")]),s._v(" "),s._m(0),s._v(" "),a("h3",[s._v("介绍")]),s._v(" "),s._m(1),s._v(" "),s._m(2),s._v(" "),s._m(3),s._v(" "),s._m(4),s._v(" "),a("p",[s._v("虽然路径不长，但是看着相当不和谐，为了简化这个操作vux提供了更简洁的写法：")]),s._v(" "),s._m(5),s._v(" "),s._m(6),s._v(" "),s._m(7),s._v(" "),s._m(8),s._v(" "),a("h3",[s._v("实现方式")]),s._v(" "),s._m(9),s._v(" "),s._m(10),s._v(" "),s._m(11),s._v(" "),s._m(12),s._v(" "),s._m(13),s._v(" "),s._m(14),s._v(" "),a("p",[s._v("上面的代码强行处理后是这样的：")]),s._v(" "),s._m(15),s._v(" "),a("p",[s._v("原理就是这么简单（但是处理时还是遇到一些问题），为了方便使用，编写了常用的一些插件。")]),s._v(" "),s._m(16),s._v(" "),s._m(17),s._v(" "),a("h3",[s._v("实际使用场景")]),s._v(" "),s._m(18),s._v(" "),a("p",[s._v("对于公用组件而言，完全可以实现构建时进行组件瘦身，只保留使用到的代码。")]),s._v(" "),a("p",[s._v("当然如果你愿意，你完全可以自己实现一门语言。")]),s._v(" "),a("h2",[s._v("安装")]),s._v(" "),s._m(19),s._v(" "),a("h2",[s._v("使用")]),s._v(" "),s._m(20),s._v(" "),s._m(21),s._v(" "),a("p",{staticClass:"warning"},[s._v("\n  更新配置后需要重启npm run dev命令\n")]),s._v(" "),a("h3",[s._v("Options")]),s._v(" "),s._m(22),s._v(" "),a("h3",[s._v("Plugins")]),s._v(" "),a("p",[s._v("插件为一个数组列表，根据需要可以添加你需要的插件，插件名为必须，有些组件不需要额外配置选项。")]),s._v(" "),a("p",[s._v("公用参数为:")]),s._v(" "),s._m(23),s._v(" "),s._m(24),s._v(" "),a("h4",[s._v("script-parser")]),s._v(" "),a("blockquote",[a("p",[s._v("script代码替换处理")])]),s._v(" "),s._m(25),s._v(" "),a("h4",[s._v("style-parser")]),s._v(" "),a("blockquote",[a("p",[s._v("style代码替换处理")])]),s._v(" "),s._m(26),s._v(" "),a("h4",[s._v("template-parser")]),s._v(" "),a("blockquote",[a("p",[s._v("template代码替换处理")])]),s._v(" "),a("blockquote",[a("p",[s._v("适用于对"),a("code",[s._v("<template></template>")]),s._v("模板代码做自定义处理"),a("br"),s._v("\n适用于某些更改不频繁但非服务端配置的文字，可能调用多次，也可能手动更改或者批量替换相对麻烦")]),s._v(" "),a("p",[s._v("同样你也可以用来从接口获取最新配置替换特定的占位字符")]),s._v(" "),a("p",[s._v("当然也适用于在源码中对"),a("code",[s._v("pm")]),s._v("进行吐槽(千万要记得production环境要有配置，否则可能会上新闻。)")])]),s._v(" "),s._m(27),s._v(" "),a("p",[s._v("插件配置：")]),s._v(" "),s._m(28),s._v(" "),a("h4",[s._v("js-parser")]),s._v(" "),a("blockquote",[a("p",[s._v("项目里js文件处理，在babel-loader前进行处理")])]),s._v(" "),s._m(29),s._v(" "),a("h4",[s._v("template-feature-switch")]),s._v(" "),a("p",[s._v("实现根据变量切换template代码")]),s._v(" "),a("p",[s._v("参数：")]),s._v(" "),s._m(30),s._v(" "),s._m(31),s._v(" "),s._m(32),s._v(" "),s._m(33),s._v(" "),a("h4",[s._v("vux-ui")]),s._v(" "),a("p",{staticClass:"warning"},[s._v("\n  vux组件的配套工具，如果没有使用vux, 不需要添加。\n")]),s._v(" "),s._m(34),s._v(" "),a("p",[s._v("该插件做了以下处理：")]),s._v(" "),s._m(35),s._v(" "),s._m(36),s._v(" "),a("p",[s._v("那么你就可以很方便地引入组件了：")]),s._v(" "),s._m(37),s._v(" "),a("h4",[s._v("i18n")]),s._v(" "),s._m(38),s._v(" "),s._m(39),s._v(" "),s._m(40),s._v(" "),s._m(41),s._v(" "),s._m(42),s._v(" "),s._m(43),s._v(" "),a("h4",[s._v("less-theme")]),s._v(" "),a("p",{staticClass:"warning"},[s._v("\n注意，path所在文件必须是简单的less变量对，不能import其他文件或者引入变量。\n")]),s._v(" "),a("blockquote",[a("p",[s._v("less 变量设置和替换")])]),s._v(" "),a("blockquote",[a("p",[s._v("适用于全局变量替换,  方便切换主题"),a("br"),s._v("\n这意味着，你不再需要为每个页面引入全局的less文件了，你只需要设置lang为less就可以直接使用变量了")])]),s._v(" "),s._m(44),s._v(" "),a("p",[s._v("插件配置：")]),s._v(" "),s._m(45),s._v(" "),a("h4",[s._v("duplicate-style")]),s._v(" "),a("blockquote",[a("p",[s._v("css 重复代码清除")])]),s._v(" "),a("p",{staticClass:"tip"},[s._v("\n  建议使用vux组件的用户使用，因为vux直接引用less，最终构建的css文件确实会有冗余。\n")]),s._v(" "),a("blockquote",[a("p",[s._v("在webpack 构建完成后对生成的css文件使用cssnano进行重复样式清除。建议只在production环境下开启，因为dev环境没有必要。")])]),s._v(" "),s._m(46),s._v(" "),a("h4",[s._v("html-build-callback")]),s._v(" "),a("blockquote",[a("p",[s._v("html文件处理事件回调")])]),s._v(" "),a("blockquote",[a("p",[s._v("适用于在写入html(一般为index.html)文件前进行内容修改，比如替换特定内容"),a("br"),s._v("\n比如写入js配置变量，改变cdn域名，将manifest文件直接写入html以减少请求等")])]),s._v(" "),s._m(47),s._v(" "),s._m(48),s._v(" "),a("h4",[s._v("build-done-callback")]),s._v(" "),a("blockquote",[a("p",[s._v("构建完成事件回调"),a("br"),s._v("\n本质上是在webpack plugin的 done 事件后触发")])]),s._v(" "),s._m(49),s._v(" "),a("h3",[s._v("使用案例")]),s._v(" "),a("h4",[s._v("统一引入less(sass)变量")]),s._v(" "),s._m(50),s._v(" "),s._m(51),s._v(" "),a("h4",[s._v("减少重复代码")]),s._v(" "),s._m(52),s._v(" "),s._m(53),s._v(" "),s._m(54),s._v(" "),s._m(55),s._v(" "),s._m(56),s._v(" "),s._m(57),s._v(" "),a("h4",[s._v("实现import语法转换")]),s._v(" "),a("p",[s._v("vux是没有main入口文件的，因此需要把import语句转换成单个组件引入。但是因为对语法树分析比较烦，能用正则替换的当然就是用正则替换，简单粗暴实用。具体可以看源码。")]),s._v(" "),a("h4",[s._v("开源组件多语言支持")]),s._v(" "),a("p",[s._v("如果以js方式分发，一般默认一个语言，用户可以加上另外的语言包，但是代码里必不可少存在相应的转换函数，对于只需要单语言的人来是个浪费和繁琐。要么所有一起打包，这个也极浪费。要么一个一个打包，这样又失去了动态多语言支持。")]),s._v(" "),s._m(58),s._v(" "),a("h3",[s._v("Bug 反馈 && 功能建议")]),s._v(" "),s._m(59),s._v(" "),a("h3",[s._v("Todo")]),s._v(" "),s._m(60)],1)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",{attrs:{align:"left"}},[a("a",{attrs:{href:"https://www.npmjs.com/package/vux-loader"}},[a("img",{attrs:{src:"https://img.shields.io/npm/v/vux-loader.svg?style=flat-square",alt:""}})]),s._v(" "),a("a",{attrs:{href:"https://www.npmjs.com/package/vux-loader"}},[a("img",{attrs:{src:"https://img.shields.io/npm/dm/vux-loader.svg?style=flat-square",alt:""}})])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[a("code",[s._v("vux-loader")]),s._v("工具的作用是对"),a("code",[s._v(".vue")]),s._v("代码进行预处理，不限于 vux 组件库。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("它是针对"),a("code",[s._v("webpack+vue-loader")]),s._v("项目的工程化工具，简化了webpack插件和loader的使用和编写，支持在vue-loader处理之前进行预处理，同时内置对vux组件专用的配置和优化插件。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("当然除了.vue文件外，你还可以对js文件进行预处理。说好的处理.vue文件，为什么连"),a("code",[s._v("js")]),s._v("文件也不放过呢？因为只有处理js才能实现理想工程化。举个例子，如果用户需要在"),a("code",[s._v("main.js")]),s._v("中调用vux的plugin，他需要这样做：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" AlertPlugin "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vux/src/plugins/Alert'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" ToastPlugin "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vux/src/plugins/Toast'")]),s._v("\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { AlertPlugin, ToastPlugin } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'vux'")]),s._v("\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("这个操作即是通过"),a("code",[s._v("js-parser")]),s._v("插件解析main.js里的"),a("code",[s._v("import")]),s._v("语法来实现的，最终进入babel的代码和上面单独引入一致。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("这个工具也许会帮你进一步打开"),a("code",[s._v("Vue")]),s._v("项目工程化的思路。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",{staticClass:"tip"},[s._v("\n  作为通用工具，即使你没有使用Vux，依然可以使用它来进行各种代码处理。\n  "),a("br"),s._v("\n  目前支持 vue-loader@>9.x, 低版本没有具体测试。\n  "),a("br"),s._v("\n  `vux!vue`的loader写法只兼容webpack@1.x，为了兼容webpack@2.x，处理后的loader配置是`vux-loader!vue-loader`\n")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("说明一下"),a("code",[s._v("vux-loader")]),s._v("是如何和"),a("code",[s._v("vue-loader")]),a("del",[s._v("搞基")]),s._v("配合的，vue-loader的issue里不少同学遇到预处理.vue的问题。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("如果你看过"),a("code",[s._v("webpack")]),s._v("loader的介绍，理论上说如果需要自己手动先处理代码再传入"),a("code",[s._v("vue-loader")]),s._v(",你只需要这样对loader做配置: "),a("code",[s._v("vue-loader!my-loader")]),s._v("。但是如果你试过，就知道这个目前行不通。"),a("code",[s._v("vue-loader")]),s._v("不会接收上一个loader的source进行处理，因为.vue文件的特殊性，它直接生成了loader string进入下一个处理，处理后的结果大概是这样的：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("/* styles */")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!vue-style-loader!css-loader!vue-loader/lib/style-rewriter?id=data-v-20d7ba9a!vue-loader/lib/selector?type=styles&index=0!./index.vue"')]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* script */")]),s._v("\n__vue_exports__ = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./index.vue"')]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* template */")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" __vue_template__ = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!vue-loader/lib/template-compiler?id=data-v-20d7ba9a!vue-loader/lib/selector?type=template&index=0!./index.vue"')]),s._v(")\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("那么vue-loader提供了自定义loader string的选项，直接配置可否呢，"),a("a",{attrs:{href:"https://github.com/vuejs/vue-loader/issues/531"}},[s._v("#531")]),s._v("，直接配置会破坏原来的loader参数，导致不能Live reload。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("那么最终能想到的就是直接修改"),a("code",[s._v("vue-loader")]),s._v("生成的代码，这样既不会影响"),a("code",[s._v("vue-loader")]),s._v("原来的逻辑，也能自由控制。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("最终实现方式是前置"),a("code",[s._v("vux-loader")]),s._v("即："),a("code",[s._v("vux-loader!vue-loader")]),s._v("，vux-loader将vue-loader生成的代码二次处理，分割loader string并(强行)插入vux的 template-loader, style-loader, script-loader，那么你就能理解vux-loader的配置方式了，在3大基本loader里获取到vux-loader的插件配置列表逐个做处理就行了。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("/* styles */")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!vue-style-loader!css-loader!vue-loader/lib/style-rewriter?id=data-v-20d7ba9a!./../../../../vux-loader/src/style-loader.js!vue-loader/lib/selector?type=styles&index=0!./index.vue"')]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* script */")]),s._v("\n__vue_exports__ = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!babel-loader!vue-loader/lib/selector?type=script&index=0!./../../../../vux-loader/src/script-loader.js!./index.vue"')]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* template */")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" __vue_template__ = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v('"!!vue-loader/lib/template-compiler?id=data-v-20d7ba9a!./../../../../vux-loader/src/template-loader.js!vue-loader/lib/selector?type=template&index=0!./index.vue"')]),s._v(")\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("至于"),a("code",[s._v("js-parser")]),s._v("就只是在"),a("code",[s._v("babel-loader")]),s._v("前加上了"),a("code",[s._v("vux-loader")]),s._v("的"),a("code",[s._v("js-loader")]),s._v("。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("而所有的loader, plugins设置都是在"),a("code",[s._v("vux-loader")]),s._v("的"),a("code",[s._v("merge")]),s._v("方法里来完成。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("我们可以使用"),a("code",[s._v("vux-loader")]),s._v("做一些很有意思的事。"),a("br"),s._v("\n比如 "),a("a",{attrs:{href:"https://github.com/vuejs/vue-loader/issues/542"}},[s._v("#542")]),s._v(" 提到的根据当前feature为判断要输出哪一部分代码，现在已经直接支持，请看 "),a("code",[s._v("template-feature-switch")]),s._v("部分。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("npm install vux-loader --save-dev\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("为了减少使用成本，只需要调用"),a("code",[s._v("merge")]),s._v("方法对原来"),a("code",[s._v("webpack")]),s._v("配置进行操作：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" webpackConfig = {} "),a("span",{staticClass:"hljs-comment"},[s._v("// 原来的webpack配置")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" vuxLoader = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'vux-loader'")]),s._v(")\n\n"),a("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".exports = vuxLoader.merge(webpackConfig, {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("options")]),s._v(": {},\n  "),a("span",{staticClass:"hljs-attr"},[s._v("plugins")]),s._v(": [{\n    "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'vux-ui'")]),s._v("\n  }]\n})\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[a("code",[s._v("env")]),s._v(" 非必选，定义当前环境变量，只在vux-loader里使用，用来判断哪些插件需要被执行(如果plugin有定义envs的话)，目的是实现一份配置多个环境使用。")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[a("code",[s._v("name")]),s._v(" "),a("code",[s._v("必须")]),s._v("，插件名字")]),s._v(" "),a("li",[a("code",[s._v("envs")]),s._v(" "),a("code",[s._v("非必须")]),s._v("，数组，当前插件在哪些环境变量里执行，不定义则默认执行")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("下面的插件配置代码将省略 "),a("code",[s._v("plugins:[]")]),s._v("的书写。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("[{\n "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'script-parser'")]),s._v(",\n "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("source")]),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" source.replace("),a("span",{staticClass:"hljs-string"},[s._v("'VARIABLE'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'v2'")]),s._v(")\n }\n}]\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("[{\n "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'style-parser'")]),s._v(",\n "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("source")]),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" source.replace("),a("span",{staticClass:"hljs-string"},[s._v("'black'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'white'")]),s._v(")\n }\n}]\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[s._v("name 插件名字， "),a("code",[s._v("template-parser")])]),s._v(" "),a("li",[s._v("replaceList 非必须，正则匹配列表，将直接调用 "),a("code",[s._v("replace")]),s._v(" 方法进行替换")]),s._v(" "),a("li",[s._v("fn 非必须，相比params更灵活的方法，可以对字符串进行处理后返回")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("[\n  name: "),a("span",{staticClass:"hljs-string"},[s._v('"template-parser"')]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("replaceList")]),s._v(": [{\n    "),a("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),a("span",{staticClass:"hljs-regexp"},[s._v("/DeathToPM/g")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("replaceString")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'微博-随时随地发现新鲜事'")]),s._v("\n  }, {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),a("span",{staticClass:"hljs-regexp"},[s._v("/呵呵我们压根没有底线/g")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("replaceString")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'我是有底线的'")]),s._v("\n  }],\n  "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("templateSource")]),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" templateSource.replace("),a("span",{staticClass:"hljs-string"},[s._v("'智障'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'机智'")]),s._v(")\n  }\n]\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("[{\n "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'js-parser'")]),s._v(",\n "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("source")]),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" source.replace("),a("span",{staticClass:"hljs-string"},[s._v("'black'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'white'")]),s._v(")\n }\n}]\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[a("code",[s._v("features")]),s._v("，变量列表，值只能为true或者false")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'template-feature-switch'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("features")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("feature1")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("feature2")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("on")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("feature")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"feature1"')]),s._v(">")]),s._v("\n      AWESOME FEATURE 1 is ON\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("on")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("off")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("feature")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"feature1"')]),s._v(">")]),s._v("\n      AWESOME FEATURE 1 is OFF\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("off")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("div")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("template")]),s._v(">")]),s._v("\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("那么当 feature1 为 true时，将输出 "),a("code",[s._v("AWESOME FEATURE 1 is ON")]),s._v(", 反之则输出 "),a("code",[s._v("AWESOME FEATURE 1 is OFF")]),s._v("。注意"),a("code",[s._v("on")]),s._v("标签内不限定内容，可以为任何标签代码块，但"),a("code",[s._v("避免在on off 里面再嵌套 on off")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("如果配合"),a("code",[s._v("vux")]),s._v("使用，需要手动启用。默认不需要设置选项。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",[a("li",[s._v("配置"),a("code",[s._v("babel")]),s._v("编译 vux 的js源码")]),s._v(" "),a("li",[s._v("修改vue-loader为 "),a("code",[s._v("vux-loader!vue-loader")])]),s._v(" "),a("li",[a("code",[s._v("import")]),s._v("组件调用解析为单组件引入")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  name: 'vux-ui'\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("// 0.x\nimport Group from 'vux/src/components/group'\nimport Cell from 'vux/src/components/cell'\n\n// 2.x\nimport { Group, Cell } from 'vux'\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ol",[a("li",[a("p",[s._v("如果你只是调用中文语言的vux组件，那么你不需要做任何配置。")])]),s._v(" "),a("li",[a("p",[s._v("如果你需要调用英文语言的vux组件，需要配置语言")])])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'i18n'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("vuxStaticReplace")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("vuxLocale")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'en'")]),s._v("\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ol",{attrs:{start:"3"}},[a("li",[s._v("如果你想和demo站点一样可以写"),a("code",[s._v("i18n")]),s._v("block，并且需要动态切换语言，那么需要配置插件抽取i18n的内容，并设置非静态替换")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'i18n'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("vuxStaticReplace")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("staticReplace")]),s._v(": "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("extractToFiles")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/locales/components.yml'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("localeList")]),s._v(": ["),a("span",{staticClass:"hljs-string"},[s._v("'en'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'zh-CN'")]),s._v("]\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("然后你就可以引用"),a("code",[s._v("vuex-i18n")]),s._v("插件实现多语言切换了。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("参考 "),a("a",{attrs:{href:"https://github.com/airyland/vux/blob/v2/src/main.js#L84-L96"}},[s._v("main.js")]),s._v(" 及 "),a("a",{attrs:{href:"https://www.npmjs.com/package/vuex-i18n"}},[s._v("vuex-i18n 文档")]),s._v("(仅当参考，你也可以使用其他i18n插件)。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v('<style lang="less">\n.info {\n color: @font-size;\n}\n</style>\n')])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'less-theme'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'src/styles/theme.less'")]),s._v("\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'duplicate-style'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("events")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("done")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'done!'")]),s._v(")\n    }\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'html-build-callback'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("events")]),s._v(": {\n   "),a("span",{staticClass:"hljs-string"},[s._v("'after-html-processing'")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("data, cb")]),s._v(") ")]),s._v("{\n      data.html += "),a("span",{staticClass:"hljs-string"},[s._v("'magic footer'")]),s._v("\n      cb("),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", data)\n   }\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("可用事件请参考 "),a("a",{attrs:{href:"https://www.npmjs.com/package/html-webpack-plugin"}},[s._v("html-webpack-plugin")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'build-done-callback'")]),s._v(",\n "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'done!'")]),s._v(")\n }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("如果你翻看"),a("code",[s._v("vue-loader")]),s._v("的issue, 就会发现不少同学在说，为什么sass, less 变量不能全局使用，需要在每个.vue组件里引入，这个很重复，有没有办法解决。目前除了在webpack里定义路径"),a("code",[s._v("alias")]),s._v("外没有其他方法。但是有了"),a("code",[s._v("vux-loader")]),s._v("，你可以用"),a("code",[s._v("style-parser")]),s._v("在每个"),a("code",[s._v(".vue")]),s._v("文件的style前面加上变量的引入了，只要一句代码。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v("{\n  name: 'style-parser',\n  fn: function (source) {\n    return \"@import '../styles/variable.less'\\n\" + source // 你可以根据this.resourcePath 来确定是否要引入以及引入的相对路径\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[a("code",[s._v("vux")]),s._v("的组件有几十个，同样demo也有几十个，因为webpack并不支持require变量，那么在main里中实现每个组件异步加载都需要这样：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" routes = [\n  {\n    "),a("span",{staticClass:"hljs-attr"},[s._v("path")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'/component/actionsheet'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attr"},[s._v("component")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("resolve")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("(["),a("span",{staticClass:"hljs-string"},[s._v("'./demos/Actionsheet'")]),s._v("], resove)\n    }\n  }\n]\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("作为懒人，写几十次这样的代码是一件比较烦人的事，作为热爱地球的人，这样也很不环保，但是有了"),a("code",[s._v("vux-loader")]),s._v(", 我们可以这样：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" routes = []\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("然后在"),a("code",[s._v("js-parser")]),s._v("里获取列表数组直接替换， 并且可以调用webpack的"),a("code",[s._v("this.addDependency")]),s._v("添加依赖实现修改列表时自动"),a("code",[s._v("reload")]),s._v("。从此添加删除组件只要加上或者删除名字就可以了，真是"),a("del",[s._v("懒")]),s._v("机智。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("pre",{staticClass:"hljs"},[a("code",[s._v(" {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'js-parser'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("test")]),s._v(": "),a("span",{staticClass:"hljs-regexp"},[s._v("/main\\.js/")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("fn")]),s._v(": "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("source")]),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".addDependency(demoPath)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" list = fs.readFileSync(demoPath, "),a("span",{staticClass:"hljs-string"},[s._v("'utf-8'")]),s._v(")\n    list = "),a("span",{staticClass:"hljs-built_in"},[s._v("JSON")]),s._v(".parse(list)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" str = []\n    list.forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("one")]),s._v(" =>")]),s._v(" {\n      str.push("),a("span",{staticClass:"hljs-string"},[s._v("`{\npath: '/component/"),a("span",{staticClass:"hljs-subst"},[s._v("${toDash(one)}")]),s._v("',\ncomponent: function (resolve) {\nrequire(['./demos/"),a("span",{staticClass:"hljs-subst"},[s._v("${one}")]),s._v(".vue'], resolve)\n}\n}`")]),s._v(")\n    })\n\n    str = "),a("span",{staticClass:"hljs-string"},[s._v("`["),a("span",{staticClass:"hljs-subst"},[s._v("${str.join("),a("span",{staticClass:"hljs-string"},[s._v("',\\n'")]),s._v(")}")]),s._v("]`")]),s._v("\n    source = source.replace("),a("span",{staticClass:"hljs-string"},[s._v("'const routes = []'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'const routes = '")]),s._v(" + str)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" source\n  }\n}\n")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("于是"),a("code",[s._v("vux")]),s._v("在"),a("code",[s._v("vux-loader")]),s._v("的支持下实现了"),a("code",[s._v("使用时构建")]),s._v("，无论是静态输出和动态支持。")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("p",[s._v("请到"),a("a",{attrs:{href:"https://github.com/airyland/vux-loader/issues"}},[s._v("https://github.com/airyland/vux-loader/issues")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ul",{staticClass:"contains-task-list"},[a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),s._v(" 支持各个插件的异步返回形式")]),s._v(" "),a("li",{staticClass:"task-list-item"},[a("input",{staticClass:"task-list-item-checkbox",attrs:{disabled:"",type:"checkbox"}}),s._v(" 在插件中提供webpack的 this 参数")])])}]},s.exports.render._withStripped=!0}});
//# sourceMappingURL=20.44cab544.js.map